<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">


<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>SIRANAP-Home</title>
	<object th:include="fragments/fragment :: metas" th:remove="tag"></object>
  	<object th:include="fragments/fragment :: css" th:remove="tag"></object>
    <object th:include="fragments/fragment :: js" th:remove="tag"></object>
    <script type="text/javascript" charset="utf8" src=" https://code.jquery.com/jquery-3.3.1.js"></script>
  	<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
  	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">
</head>

<body>

	<nav th:replace="fragments/fragment :: navbar"></nav>
	    <div class="container-fluid">
	       	<br>
	    	<h3 style="text-align:center;" th:text="'Ubah Assign Kamar Pasien'"></h3>
	        
	        <form th:action="@{/daftar-request/assign}" method="POST">
				
				<h2 th:text="'Nama: '+${pasien.nama}"></h2>
				<input class="form-control" type="hidden" name="idPasien" th:value="${pasien.id}"/>
				<br>
				<h2 th:text="'Paviliun'"></h2>
		 		<h2>
						 <select class="form-control" name="paviliun" id="paviliun">
				  	<option disabled="disabled" selected="selected">-- Pilih Paviliun --</option>
				    <option th:each="paviliun: ${paviliunList}" 
				    		th:value="${paviliun.id}" 
				    		th:text="${paviliun.namaPaviliun}"></option>
				  </select>
		 		</h2>
				<br>
				<h2 th:text="'Kamar'"></h2>
		 		<h2>
					<select class="form-control" name="Id" id="kamar">
				  		<option disabled="disabled" selected="selected">-- Pilih Kamar --</option>
				  	</select>
						
		 		</h2>
				<br>
				<button  class="btn btn-primary btn" type="submit">Submit</button>
			</form>
	        
	        
	    </div>
	    
	    <script>
			$('#paviliun').change(
				function() {
		            $.getJSON("http://localhost:2000/paviliun-available", {
		                idPaviliun : $(this).val(),
		                ajax : 'true'
		            }, 
		            function(data) {
		                var html = '<option disabled="disabled" selected="selected">-- Pilih Kamar --</option>';
		                var len = data.length;
		                console.log(len);
		                for ( var i = 0; i < len; i++) {
		                	html += 
		                    	'<option value= "'+ data[i].id +'">' + data[i].id +'</option>';
		                    console.log(data[i]);
							console.log(data[i].id);
							console.log(data[i].idPasien);         
		               	} 
		            	$('#kamar').html(html);
					});
	        });
		</script>
	   
</body>
</html>